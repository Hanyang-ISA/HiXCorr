<html>
<head>
<title>Crux: spectral-counts</title>

<link rel="stylesheet" href="crux.css" type="text/css">

</head>

<body>
<blockquote>

<div id="main">

<h1>Using spectral-counts</h1>

<p> 
After you have run a <a href="search-tutorial.html">search</a> and
assigned confidence to your identified PSMs, you can now calculate
relative quantification values for the proteins by running the
command:<br>

<div class=code>
<code>$ crux spectral-counts --protein-database small-yeast.fasta ./crux-output/percolator.target.psms.txt</code>
</div>
<br>
Alternatively, you can use the pepXML output by q-ranker using the command:<br>
<br>
<div class=code>
<code>$ crux spectral-counts --protein-database small-yeast.fasta ./crux-output/percolator.target.psms.txt</code>
</div>

<p>While the command is running, you will see output like this
</p>

<pre>
INFO: Beginning spectral-counts.
INFO: Total proteins found: 56
INFO: Number of matches passed the threshold 116
</pre>

<p>When the command is finished, it will print</p>
<pre>
INFO: Finished crux spectral-counts.
</pre>

<p>
Within the <code>crux-output</code> directory, there will be three new files:
<li>spectral-counts.target.txt &ndash; tab-delimited file of the <code>spectral-counts</code> results</li>
<li>spectral-counts.params.txt &ndash; the parameters used for running <code>spectral-counts</code></li>
<li>spectral-counts.log.txt &ndash; the log output of <code>spectral-counts</code></li>
</p>

<p>The spectral-counts.target.txt file will look something like:<br>
<pre>
protein id      NSAF
YLR043C 0.61643416
YGL135W 0.17810018
YEL027W 0.10352074
YGL009C 0.035437137
YLR185W 0.031369921
YJR069C 0.014012959
YGR192C 0.0083149187
YMR235C 0.0067826854
YBR118W 0.0060274079
</pre>

<p>
In this output, the first field is the identifier and the second field
is the spectral-counting measure (NSAF, dNSAF, SIN, or EMPAI) result
for each protein.  To select which measure is computed, see the
<a href="spectral-counts.html">crux spectral-counts</a> documentation.</p>


<h3>Using peptideprophet probability from pepXML</h3>
<p><code>crux spectral-counts</code> also supports using the Peptide Prophet probability provided in the pepXML file.  Use the command:<br>
<br>
<div class=code>
<code>$ crux spectral-counts --protein-database small-yeast.fasta --threshold-type custom --custom-threshold-name peptideprophet --threshold 0.9 --custom-threshold-min F target.pep.xml</code>
</div>          
This code will filter out matches whose Peptide Prophet probability is &lt; 0.9 and calculate NSAF for the proteins of the remaining PSMs.<br>

<h3>Using mzIdentML files with spectral-counts</h3>
<p><code>crux spectral-counts</code> also supports mzIdentML as input.  For example,  
<div class=code>
<code>$ crux spectral-counts --measure RAW file.mzid</code>
</code>
</p>
<p>
If the protein sequences are not provided in the mzIdentML file, then you will have to provide
a database using the <code>protein-database</code> parameter for the NSAF, dNSAF, EMPAI, and SIN metrics.
</p>

</div><!--end main-->

<hr></hr>

<a href="crux.html">Crux home</a>

</blockquote>
</body>
</html>
